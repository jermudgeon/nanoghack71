{% extends "layout.html" %}

{% block title %}
{{ super()}}
Scope Creeps
{% endblock %}

{% block content %}
{{ super() }}


<div class="container-fluid content">

	<div class="col-md-12">
		{% for category, message in get_flashed_messages(with_categories=true) %}
		<div class="alert alert-{{ category }}">
			<button type="button" class="close" data-dismiss="alert">&times;</button>
			{{ message }}
		</div>
		{% endfor %}
		<br/>


		<div class="row">
			<div class="col-lg-12 col-md-12">
				<div class="panel panel-default">
					<div class="panel-heading">
						Path Health Matrix
					</div>
					<div class="panel-body">
            <table class="table" data-toggle="table" data-height="518" data-sort-name="date" data-sort-order="desc" data-show-columns="true" data-pagination="true" data-page-list="[10, 20, 50]" data-search="true">
							<thead>
							<tr>
                  <th data-sortable="false"></th>
                  {% for path in path_details.keys() %}
                  <th data-sortable="false">{{ path }}</th>
                  {% endfor %}
							</tr>
							</thead>
							<tbody>
							{% for path, details in path_details.items() %}
                <tr>
                  <td> {{ path }} </td>
									{% for sub_path in path_details.keys() %}
										{% set health = details[sub_path] %}
										{% set color = "green" %}
										{% if health < 70 %}
											{% set color = "orange" %}
										{% elif health < 40 %}
											{% set color = "red" %}
										{% endif %}
										<td style="color: {{ color }}">{{ health }}</td>
                  {% endfor %}
								</tr>
							{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>


</div>

{% endblock %}

{% block scripts %}
{{ super() }}

{% endblock %}
